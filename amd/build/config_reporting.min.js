define(["jquery","jqueryui"],function(a,b){var c={};c.init=function(){c.bindings()},c.bindings=function(){a("#gt_log_search_course").unbind("change"),a("#gt_log_search_course").bind("change",function(){var b=a(this).val();"OTHER"==b?a("#gt_log_search_course_name").show():(a("#gt_log_search_course_name").val(""),a("#gt_log_search_course_name").hide())}),a("#gt_log_search_qual").unbind("change"),a("#gt_log_search_qual").bind("change",function(){a("#gt_log_search_unit").html('<option value="">'+M.util.get_string("allunits","block_gradetracker")+"</option>"),a("#gt_log_search_ass").html('<option value="">'+M.util.get_string("allass","block_gradetracker")+"</option>"),a("#gt_log_search_crit").html('<option value="">'+M.util.get_string("allcrit","block_gradetracker")+"</option>"),a("#gt_log_search_load").show();var b=a(this).val(),c={qualID:b};GT.ajax(M.cfg.wwwroot+"/blocks/gradetracker/ajax/get.php",{action:"get_qual_units",params:c},function(b){var c=a.parseJSON(b);a.each(c.order,function(b,d){a("#gt_log_search_unit").append('<option value="'+d+'">'+c.units[d]+"</option>")}),a("#gt_log_search_load").hide()}),GT.ajax(M.cfg.wwwroot+"/blocks/gradetracker/ajax/get.php",{action:"get_qual_assessments",params:c},function(b){var c=a.parseJSON(b);a.each(c.order,function(b,d){a("#gt_log_search_ass").append('<option value="'+d+'">'+c.ass[d]+"</option>")}),a("#gt_log_search_load").hide()})}),a("#gt_log_search_unit").unbind("change"),a("#gt_log_search_unit").bind("change",function(){a("#gt_log_search_crit").html('<option value="">'+M.util.get_string("allcrit","block_gradetracker")+"</option>");var b=a(this).val();if(""!=b){a("#gt_log_search_load").show();var c={unitID:b};GT.ajax(M.cfg.wwwroot+"/blocks/gradetracker/ajax/get.php",{action:"get_unit_criteria",params:c},function(b){var c=a.parseJSON(b);a.each(c.order,function(b,d){a("#gt_log_search_crit").append('<option value="'+d+'">'+c.criteria[d]+"</option>")}),a("#gt_log_search_load").hide()})}}),a("input.gt_run_report").unbind("click"),a("input.gt_run_report").bind("click",function(b){var c=a(this);c.prop("disabled",!0),c.val(M.util.get_string("running","block_gradetracker")+"...");var d=a(this).attr("report"),e={};e.report=d,e.btn=c.attr("id"),e.params=[],a(".report_option").each(function(){var b=a(this).attr("name"),c=a(this).val();e.params.push({name:b,value:c})}),GT.ajaxProgress(M.cfg.wwwroot+"/blocks/gradetracker/ajax/get.php",{action:"download_report",params:e},"#gt_report_progress",function(a){c.prop("disabled",!1),c.val(M.util.get_string("run","block_gradetracker")),window.location=M.cfg.wwwroot+"/blocks/gradetracker/download.php?f="+a.file+"&t="+a.time}),b.preventDefault()})};var d={};return d.log=function(a){console.log("[GT] "+(new Date).toTimeString().split(" ")[0]+": "+a)},d.init=function(){c.init(),d.log("Loaded config_reporting.js")},d});