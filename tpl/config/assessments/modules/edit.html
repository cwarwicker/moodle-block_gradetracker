<?php if(!defined('BCGT')) exit; ?>

<?php echo (!empty($MSGS['errors'])) ? gt_error_alert_box($MSGS['errors']) : '' ?>
<?php echo (!empty($MSGS['success'])) ? gt_success_alert_box($MSGS['success']) : '' ?>

<div class="gt_full_page">

    <form action="" method="post" id="gt_course_quals_form">
        <input type="hidden" name="sesskey" value="<?php echo sesskey() ?>" />

        <?php if ($Mod->isValid()): ?>
            <input type="hidden" name="id" value="<?php echo $Mod->getID() ?>" />
        <?php endif; ?>

        <div class="gt_form_panel">

            <div class="gt_form_panel_heading"><?php echo $string['managemodulelinking'] ?></div>

            <div class="gt_form_panel_body">

                <div>

                    <table id="gt_mod_linking_edit">

                        <tr>
                            <th><?php echo $string['enabled'] ?></th>
                            <td><input type="checkbox" name="enabled" value="1" <?php echo ($Mod->isEnabled()) ? 'checked' : ''; ?> /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:mod'] ?></th>
                            <td>
                                <select name="modid">
                                    <option value=""></option>
                                    <?php if ($allMods): ?>
                                        <?php foreach($allMods as $mod): ?>
                                            <option value="<?php echo $mod->id ?>" <?php echo ($Mod->getModName() == $mod->name) ? 'selected' : ''; ?> class="<?php echo (in_array($mod->name, \block_gradetracker\ModuleLink::getSupportedMods())) ? 'gt_mod_supported' : '' ?>" ><?php echo $mod->name ?> <?php echo (in_array($mod->name, \block_gradetracker\ModuleLink::getSupportedMods())) ? '&#10004;' : '' ?></option>
                                        <?php endforeach; ?>
                                    <?php endif; ?>
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:modtable'] ?></th>
                            <td><input type="text" name="modtable" value="<?php echo \gt_html($Mod->getModTable()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:parttable'] ?></th>
                            <td><input type="text" name="parttable" value="<?php echo \gt_html($Mod->getPartTable()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:partmoddbcolumn'] ?></th>
                            <td><input type="text" name="partmodcol" value="<?php echo \gt_html($Mod->getPartModCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:coursedbcolumn'] ?></th>
                            <td><input type="text" name="modcoursecol" value="<?php echo \gt_html($Mod->getModCourseCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:startdatedbcolumn'] ?></th>
                            <td><input type="text" name="modstartcol" value="<?php echo \gt_html($Mod->getModStartCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:duedatedbcolumn'] ?></th>
                            <td><input type="text" name="modduecol" value="<?php echo \gt_html($Mod->getModDueCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:instancetitledbcolumn'] ?></th>
                            <td><input type="text" name="modtitlecol" value="<?php echo \gt_html($Mod->getModTitleCol()) ?>" /></td>
                        </tr>

                         <tr>
                            <th><?php echo $string['modlinking:parttitledbcolumn'] ?></th>
                            <td><input type="text" name="parttitlecol" value="<?php echo \gt_html($Mod->getPartTitleCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissiontable'] ?></th>
                            <td><input type="text" name="submissiontable" value="<?php echo \gt_html($Mod->getSubTable()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissionmodinstancedbcolumn'] ?></th>
                            <td><input type="text" name="submissionmodinstancecol" value="<?php echo \gt_html($Mod->getSubModCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissionpartdbcolumn'] ?></th>
                            <td><input type="text" name="submissionpartcol" value="<?php echo \gt_html($Mod->getSubPartCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissionuserdbcolumn'] ?></th>
                            <td><input type="text" name="submissionusercol" value="<?php echo \gt_html($Mod->getSubUserCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissiondatedbcolumn'] ?></th>
                            <td><input type="text" name="submissiondatecol" value="<?php echo \gt_html($Mod->getSubDateCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissionstatusdbcolumn'] ?></th>
                            <td><input type="text" name="submissionstatuscol" value="<?php echo \gt_html($Mod->getSubStatusCol()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:submissionstatusexpectedvalue'] ?></th>
                            <td><input type="text" name="submissionstatusval" value="<?php echo \gt_html($Mod->getSubStatusVal()) ?>" /></td>
                        </tr>

                        <tr>
                            <th><?php echo $string['modlinking:auto'] ?></th>
                            <td><input type="checkbox" name="auto" value="1" <?php echo ($Mod->hasAutoUpdates()) ? 'checked' : ''; ?> /></td>
                        </tr>

                    </table>

                </div>

                <br>

                <p class="gt_c">
                    <input type="submit" class="gt_btn gt_blue" name="submit_mod_link" value="<?php echo $string['save'] ?>" />
                    <a href="<?php echo $CFG->wwwroot ?>/blocks/gradetracker/config.php?view=assessments&section=modules" class="gt_btn gt_red"><?php echo $string['cancel'] ?></a>
                </p>


            </div>

        </div>


    </form>

</div>