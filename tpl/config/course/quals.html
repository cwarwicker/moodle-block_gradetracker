<?php if(!defined('BCGT')) exit; ?>

<?php echo (!empty($MSGS['errors'])) ? gt_error_alert_box($MSGS['errors']) : '' ?>
<?php echo (!empty($MSGS['success'])) ? gt_success_alert_box($MSGS['success']) : '' ?>

<?php $nodeSpacing = ''; ?>

<select id="gt_switch_course" section="<?php echo $section ?>" class="gt_form_control">

    <?php foreach($Course->getRelationshipHierarchy() as $node): ?>

        <option value="<?php echo $node->id ?>" <?php echo ($node->id == $Course->id) ? 'selected' : ''; ?> >

                <?php if (isset($nodeLvl) && $node->hierarchyLevel < $nodeLvl): ?>
                    <?php $nodeSpacing .= str_repeat('&nbsp;', 4) ?>
                <?php elseif (isset($nodeLvl) && $node->hierarchyLevel > $nodeLvl): ?>
                    <?php $nodeSpacing = substr($nodeSpacing, 0, -24) ?>
                <?php endif; ?>

                <?php if (isset($nodeSpacing)): ?>
                    <?php echo $nodeSpacing ?>
                <?php endif; ?>

                <?php echo $node->getName() ?>

        </option>

        <?php $nodeLvl = $node->hierarchyLevel ?>

    <?php endforeach; ?>

</select>
<br>
<div class="gt_full_page">

    <form action="" method="post" id="gt_course_quals_form">
        <input type="hidden" name="sesskey" value="<?php echo sesskey() ?>" />

        <div class="gt_form_panel">

            <div class="gt_form_panel_heading"><?php echo $Course->getName() ?> - <?php echo $string['qualsoncourse'] ?></div>

            <div class="gt_form_panel_body">

                <p class="gt_c">
                    <input type="submit" class="gt_btn gt_blue" name="save_course_quals" value="<?php echo $string['save'] ?>" />
                    <a href="<?php echo $CFG->wwwroot ?>/course/view.php?id=<?php echo $Course->id ?>" class="gt_btn gt_red"><?php echo $string['cancel'] ?></a>
                    <br><br>
                </p>

                <?php echo $QualPicker->display() ?>

            </div>

        </div>

    </form>

</div>
