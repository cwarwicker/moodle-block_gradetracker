<?php if(!defined('BCGT')) exit; ?>

<?php if (isset($log)): ?>

    <div>
        <span>
            <a href="<?php echo $CFG->wwwroot ?>/user/profile.php?id=<?php echo $log->userid ?>"><?php echo $log->user->getDisplayName() ?></a> <?php echo $log->details ?>, <?php echo \date('D jS M Y, H:i', $log->timestamp) ?>
        </span>
        <br>
        <div>
            <table>
                <tbody>
                    <?php foreach($log->attributes as $name => $val): ?>
                        <tr><td><?php echo $string['log:att:'.$name] ?>:</td><td><strong><?php echo $log->getAttributeFromValue($name, $val) ?></strong></td></tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>

        <hr>

        <strong><?php echo $string['before'] ?>:</strong><br>
        <?php print_object( (!is_null($log->beforejson)) ? $log->beforejson : '-' ) ?>

        <strong><?php echo $string['after'] ?>:</strong><br>
        <?php print_object( (!is_null($log->afterjson)) ? $log->afterjson : '-' ) ?>

        <hr>

        <strong><?php echo $string['debuginfo'] ?></strong><br>
        <?php print_object( $log->backtrace ) ?>

    </div>

<?php endif; ?>