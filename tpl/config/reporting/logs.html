<?php if(!defined('BCGT')) exit; ?>

<?php echo (!empty($MSGS['errors'])) ? gt_error_alert_box($MSGS['errors']) : '' ?>
<?php echo (!empty($MSGS['success'])) ? gt_success_alert_box($MSGS['success']) : '' ?>

<form action="" method="post">
    <input type="hidden" name="sesskey" value="<?php echo sesskey() ?>" />

    <div>
        <small><strong><?php echo $string['logdetails'] ?></strong></small><br>

        <select name="log_details">
            <option value=""><?php echo $string['allactions'] ?></option>
            <optgroup label="<?php echo \GT\Log::GT_LOG_CONTEXT_GRID ?>">
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_VIEWED_STUDENT_GRID ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_VIEWED_STUDENT_GRID) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_VIEWED_STUDENT_GRID ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_VIEWED_UNIT_GRID ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_VIEWED_UNIT_GRID) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_VIEWED_UNIT_GRID ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_VIEWED_CLASS_GRID ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_VIEWED_CLASS_GRID) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_VIEWED_CLASS_GRID ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_CRIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_USER_CRIT) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_CRIT ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_UNIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_USER_UNIT) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_UNIT ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_ASS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_USER_ASS) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_ASS ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_ATT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_USER_ATT) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_ATT ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_RANGE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_USER_RANGE) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_RANGE ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_GRADE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_USER_GRADE) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_USER_GRADE ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_AUTO_UPDATED_USER_GRADE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_AUTO_UPDATED_USER_GRADE) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_AUTO_UPDATED_USER_GRADE ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_AUTO_UPDATED_USER_AWARD ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_AUTO_UPDATED_USER_AWARD) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_AUTO_UPDATED_USER_AWARD ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_STUDENT_GRID ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_STUDENT_GRID) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_STUDENT_GRID ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_UNIT_GRID ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_UNIT_GRID) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_UNIT_GRID ?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_CLASS_GRID ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_CLASS_GRID) ? 'selected' : '' ?> ><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_CLASS_GRID ?></option>
            </optgroup>
            <optgroup label="<?php echo \GT\Log::GT_LOG_CONTEXT_CONFIG ?>">
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GENERAL_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GENERAL_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GENERAL_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_QUAL_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_QUAL_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_QUAL_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_UNIT_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_UNIT_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_UNIT_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_CRITERIA_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_CRITERIA_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_CRITERIA_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GRID_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GRID_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GRID_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_USER_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_USER_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_USER_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GRADE_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GRADE_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_GRADE_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_ASSESSMENTS_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_ASSESSMENTS_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_ASSESSMENTS_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_REPORTING_SETTINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_REPORTING_SETTINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_PLUGIN_REPORTING_SETTINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QUAL_STRUCTURE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QUAL_STRUCTURE) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QUAL_STRUCTURE?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QUAL_BUILD ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QUAL_BUILD) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QUAL_BUILD?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_UNIT_GRADING_STRUCTURE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_UNIT_GRADING_STRUCTURE) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_UNIT_GRADING_STRUCTURE?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_CRITERIA_GRADING_STRUCTURE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_CRITERIA_GRADING_STRUCTURE) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_CRITERIA_GRADING_STRUCTURE?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_LEVELS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_LEVELS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_LEVELS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_SUBTYPES ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_SUBTYPES) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_SUBTYPES?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QOE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QOE) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_STRUCTURE_QOE?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_CREATED_QUALIFICATION ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_CREATED_QUALIFICATION) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_CREATED_QUALIFICATION?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_QUALIFICATION ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_QUALIFICATION) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_QUALIFICATION?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DUPLICATED_QUALIFICATION ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DUPLICATED_QUALIFICATION) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DUPLICATED_QUALIFICATION?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DELETED_QUALIFICATION ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DELETED_QUALIFICATION) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DELETED_QUALIFICATION?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_RESTORED_QUALIFICATION ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_RESTORED_QUALIFICATION) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_RESTORED_QUALIFICATION?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_CREATED_UNIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_CREATED_UNIT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_CREATED_UNIT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_UNIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_UNIT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_UNIT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DUPLICATED_UNIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DUPLICATED_UNIT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DUPLICATED_UNIT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DELETED_UNIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DELETED_UNIT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DELETED_UNIT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_RESTORED_UNIT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_RESTORED_UNIT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_RESTORED_UNIT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_QUALS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_QUALS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_QUALS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_USER_QUALS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_USER_QUALS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_USER_QUALS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_USER_UNITS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_USER_UNITS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_USER_UNITS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_ACTIVITY_LINKS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_ACTIVITY_LINKS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_COURSE_ACTIVITY_LINKS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DELETED_COURSE_ACTIVTY_LINK ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DELETED_COURSE_ACTIVTY_LINK) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DELETED_COURSE_ACTIVTY_LINK?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_CREATED_ASSESSMENT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_CREATED_ASSESSMENT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_CREATED_ASSESSMENT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_ASSESSMENT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_ASSESSMENT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_ASSESSMENT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DELETED_ASSESSMENT ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DELETED_ASSESSMENT) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DELETED_ASSESSMENT?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_CREATED_MODULE_LINK ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_CREATED_MODULE_LINK) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_CREATED_MODULE_LINK?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_MODULE_LINK ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_MODULE_LINK) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_MODULE_LINK?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_DELETED_MODULE_LINK ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_DELETED_MODULE_LINK) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_DELETED_MODULE_LINK?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_DATA_MAPPINGS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_UPDATED_DATA_MAPPINGS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_UPDATED_DATA_MAPPINGS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_TRANSFERRED_OLD_SPECS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_TRANSFERRED_OLD_SPECS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_TRANSFERRED_OLD_SPECS?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_TRANSFERRED_OLD_DATA ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_TRANSFERRED_OLD_DATA) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_TRANSFERRED_OLD_DATA?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_QOE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_QOE) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_QOE?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_AVGGCSE ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_AVGGCSE) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_AVGGCSE?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_TARGET_GRADES ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_TARGET_GRADES) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_TARGET_GRADES?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_ASP_GRADES ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_ASP_GRADES) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_ASP_GRADES?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_CETA_GRADES ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_CETA_GRADES) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_CETA_GRADES?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_ASSESSMENT_GRADES ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_ASSESSMENT_GRADES) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_ASSESSMENT_GRADES?></option>
                <option value="<?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_COEFFICIENTS ?>" <?php echo (isset($search['details']) && $search['details'] == \GT\Log::GT_LOG_DETAILS_IMPORTED_COEFFICIENTS) ? 'selected' : '' ?>><?php echo \GT\Log::GT_LOG_DETAILS_IMPORTED_COEFFICIENTS?></option>
            </optgroup>
        </select>

        <input type="text" name="log_user" placeholder="<?php echo $string['username'] ?>" value="<?php echo (isset($search['user'])) ? $search['user'] : '' ?>" />
        <input type="text" name="log_date_from" class="gt_date" placeholder="<?php echo get_string('from') ?> (dd-mm-yyyy)" value="<?php echo (isset($search['date_from'])) ? $search['date_from'] : '' ?>" />
        <input type="text" name="log_date_to" class="gt_date" placeholder="<?php echo get_string('to') ?> (dd-mm-yyyy)" value=" <?php echo (isset($search['date_to'])) ? $search['date_to'] : date('d-m-Y') ?>" />

        <br><hr>

        <small><strong><?php echo $string['logattributes'] ?></strong> - <?php echo $string['logattributes:desc'] ?></small><br>

        <table id='gt_log_search_attributes'>
            <tr>
                <td>
                    <select id="gt_log_search_qual" name="log_attribute[QUALID]">
                        <option value=""><?php echo $string['allquals'] ?></option>
                        <?php if ($allQuals): ?>
                            <?php foreach($allQuals as $qual): ?>
                                <option value="<?php echo $qual->getID() ?>" <?php echo (isset($search['atts']['QUALID']) && $search['atts']['QUALID'] == $qual->getID()) ? 'selected' : '' ?> ><?php echo $qual->getDisplayName() ?> [<?php echo $qual->getID() ?>]</option>
                            <?php endforeach; ?>
                        <?php endif; ?>
                    </select>
                    <br>
                    <select id="gt_log_search_unit" name="log_attribute[UNITID]">
                        <option value=""><?php echo $string['allunits'] ?></option>

                        <?php if (isset($useUnits) && $useUnits): ?>
                            <?php foreach($useUnits as $unit): ?>
                                <option value="<?php echo $unit->getID() ?>" <?php echo (isset($search['atts']['UNITID']) && $search['atts']['UNITID'] == $unit->getID()) ? 'selected' : '' ?> ><?php echo \gt_html($unit->getDisplayName()) ?> [<?php echo $unit->getID() ?>]</option>
                            <?php endforeach; ?>
                        <?php endif; ?>

                    </select>
                    <br>
                    <select id='gt_log_search_crit' name="log_attribute[CRITID]">
                        <option value=""><?php echo $string['allcrit'] ?></option>

                        <?php if (isset($useCriteria) && $useCriteria): ?>
                            <?php foreach($useCriteria as $crit): ?>
                                <option value="<?php echo $crit->getID() ?>" <?php echo (isset($search['atts']['CRITID']) && $search['atts']['CRITID'] == $crit->getID()) ? 'selected' : '' ?> ><?php echo \gt_html($crit->getName()) ?></option>
                            <?php endforeach; ?>
                        <?php endif; ?>

                    </select>
                    <br>
                    <select id='gt_log_search_ass' name="log_attribute[ASSID]">
                        <option value=""><?php echo $string['allass'] ?></option>

                        <?php if (isset($useAss) && $useAss): ?>
                            <?php foreach($useAss as $ass): ?>
                                <option value="<?php echo $ass->getID() ?>" <?php echo (isset($search['atts']['ASSID']) && $search['atts']['ASSID'] == $ass->getID()) ? 'selected' : '' ?> ><?php echo \gt_html($ass->getName()) ?></option>
                            <?php endforeach; ?>
                        <?php endif; ?>

                    </select>
                </td>

                <td>
                    <select id="gt_log_search_course" name="log_attribute[COURSEID]">
                        <option value=""><?php echo $string['allcourses'] ?></option>
                        <?php if ($allCourses): ?>
                            <?php foreach($allCourses as $course): ?>
                                <option value="<?php echo $course->id ?>" <?php echo (isset($search['atts']['COURSEID']) && $search['atts']['COURSEID'] == $course->id) ? 'selected' : '' ?> ><?php echo \gt_html($course->fullname) ?> [<?php echo $course->id ?>]</option>
                            <?php endforeach; ?>
                        <?php endif; ?>
                        <option value="OTHER" <?php echo (isset($search['atts']['COURSEID']) && $search['atts']['COURSEID'] == 'OTHER') ? 'selected' : '' ?> ><?php echo $string['other'] ?></option>
                    </select><br>
                    <input type='text' id='gt_log_search_course_name' name='log_attribute[COURSENAME]' placeholder="<?php echo $string['courseshortname'] ?>" value="<?php echo (isset($search['atts']['COURSENAME'])) ? \gt_html($search['atts']['COURSENAME']) : '' ?>" style="display:<?php echo (isset($search['atts']['COURSENAME']) && $search['atts']['COURSENAME'] != '') ? 'block' : 'none' ?>;" />
                </td>

                <td>
                    <input type="text" name="log_attribute[STUDENTID]" placeholder="<?php echo $string['affecteduser'] ?> (<?php echo $string['username'] ?>)" value="<?php echo (isset($search['atts']['STUDENTID'])) ? \gt_html($search['atts']['STUDENTID']) : '' ?>" />
                </td>
            </tr>
        </table>

    </div>

    <p class='gt_centre'><img id="gt_log_search_load" src="<?php echo $CFG->wwwroot ?>/blocks/gradetracker/pix/ajax-loader.gif" style="display:none;" /></p>
    <p class='gt_centre'><input type='submit' name='search' class='gt_btn' value='<?php echo $string['search'] ?>' /></p>

</form>

<br><br>

<?php if (isset($results)): ?>

    <?php if ($results): ?>

        <div>
            <div class="gt_form_panel_heading"><?php echo $string['results'] ?></div>
            <div class="gt_form_panel_body">
                <table class='gt_config gt_config_white gt_left'>
                    <tr>
                        <?php foreach( array_keys( reset($results) ) as $header ): ?>
                            <th><?php echo $header ?></th>
                        <?php endforeach; ?>
                        <th><?php echo $string['debuginfo'] ?></th>
                    </tr>
                    <?php foreach($results as $row): ?>
                        <tr>
                            <?php foreach($row as $key => $val): ?>
                                <td>
                                    <?php if (is_array($val)): ?>
                                        <?php foreach($val as $k => $v): ?>
                                            <b><?php echo (isset($string['log:att:'.$k])) ? $string['log:att:'.$k] : '???' ?>:</b> <?php echo $v ?><br>
                                        <?php endforeach; ?>
                                    <?php else: ?>
                                        <?php echo \gt_html($val) ?>
                                    <?php endif; ?>
                                </td>
                            <?php endforeach; ?>
                            <td>
                                <a href="javascript:window.open('<?php echo $CFG->wwwroot ?>/blocks/gradetracker/log.php?id=<?php echo $row['id'] ?>', 'log', 'width=650,height=600');"><img src="<?php echo $CFG->wwwroot ?>/blocks/gradetracker/pix/icons/page_go.png" /></a>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </table>
            </div>
        </div>

    <?php else: ?>
        <p class='gt_centre'><?php echo $string['noresults'] ?></p>
    <?php endif; ?>

<?php endif; ?>